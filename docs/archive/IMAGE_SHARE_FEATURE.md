# 图片分享功能 - 完整需求文档

**项目**: Daily News Bot
**功能**: 单条新闻卡片生成精美图片，支持长按保存分享
**文档版本**: v2.1 (Final)
**创建时间**: 2025-02-09
**状态**: ✅ 需求已确认，可以交付开发

---

## 📋 目录

1. [功能概述](#功能概述)
2. [已确认的需求](#已确认的需求)
3. [设计风格规范](#设计风格规范)
4. [图片布局结构](#图片布局结构)
5. [技术实现方案](#技术实现方案)
6. [用户交互流程](#用户交互流程)
7. [测试页面规格](#测试页面规格)
8. [待确认问题](#待确认问题)
9. [设计参考要素](#设计参考要素)

---

## 功能概述

将单条新闻卡片生成为精美的竖版图片，用户点击"图片"按钮后，前端直接生成图片并弹出预览，用户可长按保存并分享到微信等社交媒体。

**核心价值**:
- ✅ 社交媒体友好：精美设计，适合分享
- ✅ 操作简单：一键生成，长按保存
- ✅ 品牌传播：自动带二维码和品牌信息

---

## 已确认的需求

### 1. 生成内容
- ✅ **单条新闻完整版**：包含标题、摘要、来源、时间
- ❌ **不包含**：AI锐评（不在图片中显示）
- ❌ **不包含**：英文原标题（不在图片中显示）
- ✅ 不生成整日报告，只生成单条新闻

### 2. 设计风格
- ✅ **纯粹社论风**：报纸质感、紧凑布局、高对比度
- ✅ **杂志风格**：像精美的报纸单条新闻摘要卡
- ✅ **无科技感装饰**：去掉渐变背景和几何图形

### 3. 二维码位置
- ✅ 位于新闻卡片最下方，右对齐
- ✅ 大小：150×150px
- ✅ 左侧文字："Shared by 文森特"（一行显示）
- ✅ 整体视觉协调，作为新闻卡片的页尾
- ✅ 字体颜色：浅灰色 `#94A3B8`
- ✅ 二维码样式：带爱马仕橙点缀（现代）

### 4. 二维码链接
- ✅ 链接到当天的新闻页面（如 `2025-02-08.html`）

### 5. 图片尺寸
- ✅ 宽度：1080px（固定）
- ✅ 高度：自适应（根据内容自动调整）
- ✅ 适合iPhone在微信聊天框里阅读

### 6. 用户流程
- ✅ 点击"图片"按钮
- ✅ 直接弹出生成好的图片（全屏预览）
- ✅ 用户自己长按图片，调用手机原生功能保存或分享

### 7. 测试页面
- ✅ 放在新的子文件夹（不要上传到GitHub）
- ✅ 包含2-3条测试新闻

### 8. 图片格式
- ✅ JPG/JPEG（文件小，加载快）
- ❌ 不使用PNG（文件太大）

### 9. 实现方式
- ✅ 前端HTML直接生成（使用 html2canvas）
- ✅ 不需要后端处理

---

## 设计风格规范

### 一、核心设计原则

#### 1. 风格定位
**Compact Editorial（纯粹紧凑社论风）**

- **设计理念**: 像精美的报纸单条新闻摘要卡或杂志新闻侧边栏卡片
- **核心特点**: 信息聚焦、高对比、视觉冲击力
- **无科技装饰**: 去掉渐变背景、几何图形、科技线条
- **纯粹质感**: 报纸米色背景、报纸排版、高对比度文字

#### 2. 布局逻辑
- 严格的网格系统
- 拒绝无效留白
- 围绕单条新闻核心要素进行高密度聚合
- 突出信息层级

### 二、色彩方案

#### 主色调（纯粹社论风）
```css
/* 背景色系 */
--bg-primary: #e5e0d8;        /* 沉稳的报纸米色（整个图片背景） */
--bg-secondary: #ece8e1;      /* 浅色背景块（导语区） */
--bg-card: #ffffff;           /* 白色卡片（核心要素区） */

/* 文字色系 */
--text-primary: #2c241b;      /* 近乎黑的深褐（高对比主文字） */
--text-secondary: #64748B;    /* 深灰（次要文字） */
--text-tertiary: #94A3B8;     /* 浅灰（页尾Shared by） */

/* 强调色系 */
--accent: #c17c4a;            /* 爱马仕橙/暖棕（来源/时间、图标） */

/* 装饰色系 */
--border-color: #dcd6ce;      /* 分割线颜色 */
--border-thick: #2c241b;      /* 粗黑线（Header分割线） */
```

**无渐变背景**:
- ❌ 去掉了蓝紫渐变
- ❌ 去掉了几何装饰
- ✅ 纯粹的报纸米色背景
- ❌ 图片始终使用亮色主题（不考虑暗色模式）
- ✅ 原因：微信聊天框多为白色背景，亮色图片显示效果更好

### 三、字体系统

#### 字体引入
```html
<!-- 字体引入 -->
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@700;900&family=Noto+Sans+SC:wght@500;700&family=Oswald:wght@500;700&display=swap" rel="stylesheet">
<!-- 图标库 -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
```

#### 字体用途
| 用途 | 字体 | 字重 | 行高 | 用途说明 |
|------|------|------|------|---------|
| **超大标题** | 'Noto Serif SC' | 900 | 0.85 | 极其紧凑的衬线大标题，报纸质感 |
| **来源/时间** | 'Oswald' | 700 | - | 高窄的无衬线体，现代感强 |
| **英文原标题** | 'Oswald' | 500 | - | 斜体，轻量级 |
| **正文** | 'Noto Sans SC' | 500/700 | 1.6 | 清晰易读的中文 |
| **核心要素** | 'Noto Sans SC' | 500/700 | - | 标签700，说明500 |

---

## 图片布局结构

### 一、整体规格

#### 基础规格（✅ 已确认）
- **尺寸**: 宽度1080px固定，高度自适应（根据内容自动调整）
- **格式**: JPG/JPEG（文件小，加载快）
- **圆角**: 16px
- **背景**: `#e5e0d8`（报纸米色，整个图片背景）
- **图片质量**: 0.85（平衡清晰度和文件大小）
- **二维码样式**: 带爱马仕橙点缀（现代）
- **二维码大小**: 150×150px
- **品牌Logo**: 不显示

### 二、布局结构（从上到下）- 纯粹社论风

```
┌──────────────────────────────────────┐
│ 📰 新闻卡片 (整个图片就是卡片)       │
│                                       │
│ 整体尺寸: 1080px宽 × 自适应高度       │
│ 背景: #e5e0d8 (报纸米色)              │
│ 圆角: 16px                           │
│ 内边距: 60px                         │
│                                       │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│                                       │
│ Header (新闻报头)                     │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│                                       │
│ 📰 [超大标题]                         │
│ 字体: Noto Serif SC                   │
│ 字重: 900                             │
│ 大小: 64px (4rem)                     │
│ 颜色: #2c241b                         │
│ 行高: 0.85 (极其紧凑)                 │
│ 最多2行，超出显示"..."                │
│                                       │
│ 来源: BLOOMBERG | 2小时前             │
│ 字体: Oswald                          │
│ 字重: 700                             │
│ 大小: 18px                            │
│ 颜色: #c17c4a (爱马仕橙)              │
│ 全大写                                │
│                                       │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│ 粗黑线 border-b-4 border-[#2c241b]   │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│                                       │
│ News Lead (新闻导语区)                │
│ ┃📦                                   │
│ 背景: #ece8e1 (浅米色)                │
│ 左边框: 4px #c17c4a (橙色粗边框)     │
│ 内边距: 32px                          │
│ 外边距: 上下32px                      │
│                                       │
│ [摘要内容]                            │
│ 字体: Noto Sans SC                    │
│ 字重: 500                             │
│ 大小: 28px                            │
│ 颜色: #2c241b                         │
│ 行高: 1.6                             │
│ 最多6行，超出显示"..."                │
│                                       │
│ News Core Elements (核心要素区)       │
│ ┃📊 (可选，如果有关键数据)            │
│                                       │
│ [白色卡片]                            │
│ 背景: #ffffff                         │
│ 边框: 1px solid #dcd6ce               │
│ 圆角: 8px                             │
│ 内边距: 20px                          │
│                                       │
│ 图标 + 要素标签 + 极简说明             │
│ (最多3个核心要素)                      │
│                                       │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│ 分割线 border-t-2 border-[#dcd6ce]   │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│                                       │
│        Shared by 文森特  [📷二维码]   │ ← 一行，右对齐
│                                       │
└──────────────────────────────────────┘
```
│     │                             │   │
│     │  ┌──────────────────────┐  │   │
│     │  │ News Lead (导语区)   │  │   │
│     │  │ ┃📦                   │  │   │
│     │  │ 背景: #ece8e1        │  │   │
│     │  │ 左边框: 4px #c17c4a  │  │   │
│     │  │ 内边距: 24px         │  │   │
│     │  │                      │  │   │
│     │  │ [摘要内容]           │  │   │
│     │  │ 字体: Noto Sans SC   │  │   │
│     │  │ 字重: 500            │  │   │
│     │  │ 大小: 28px           │  │   │
│     │  │ 颜色: #2c241b        │  │   │
│     │  │ 最多6行，超出显示"..." │  │   │
│     │  └──────────────────────┘  │   │
│     │                             │   │
│     │  ┌──────────────────────┐  │   │
│     │  │ 📄 原标题 (英文)     │  │   │
│     │  │                      │  │   │
│     │  │ [Title Original]     │  │   │
│     │  │ 字体: Oswald         │  │   │
│     │  │ 字重: 500            │  │   │
│     │  │ 大小: 20px           │  │   │
│     │  │ 颜色: #94A3B8 (浅灰) │  │   │
│     │  │ 斜体                  │  │   │
│     │  │ 最多1行，超出显示"..." │  │   │
│     │  └──────────────────────┘  │   │
│     │                             │   │
│     │  ━━━━━━━━━━━━━━━━━━━━━━━━│   │
│     │  [border-t-2 #dcd6ce]      │   │
│     │                             │   │
│     │        Shared by @Financial │ ← 右对齐
│     │             Intelligence    │
│     │                         [📷]│ ← 二维码 150×150px
│     │                             │   │
│     └────────────────────────────┘   │
│                                      │
└──────────────────────────────────────┘
```

### 三、详细布局说明

#### 1. 整体卡片（整个图片）
- **尺寸**: 宽度1080px固定，高度自适应（根据内容自动调整）
- **背景**: `#e5e0d8`（报纸米色，整个图片就是卡片）
- **圆角**: 16px
- **内边距**: 60px
- **无阴影**: 纯平面设计
- **品牌Logo**: 不显示

#### 2. Header（新闻报头）

**超大标题**:
- 字体: `'Noto Serif SC'`, 900
- 大小: 64px (4rem)
- 行高: 0.85（极其紧凑）
- 颜色: `#2c241b`
- 最多2行，超出显示"..."
- 紧贴顶部
- 底部有粗黑线分割: `border-b-4 border-[#2c241b]`

**来源/时间**:
- 字体: `'Oswald'`, 700
- 大小: 18px
- 颜色: `#c17c4a`（爱马仕橙）
- 格式: `来源: [SOURCE] | [TIME]`
- 全大写英文 + 中文组合
- 位置: 标题下方，粗黑线上方

#### 3. News Lead（新闻导语区）
- **背景**: `#ece8e1`（浅米色）
- **左边框**: `border-l-4 border-[#c17c4a]`（4px橙色）
- **内边距**: 32px
- **外边距**: 上下32px
- **字体**: `'Noto Sans SC'`, 500
- **大小**: 28px
- **颜色**: `#2c241b`
- **行高**: 1.6
- **最多6行**，超出显示"..."

#### 4. News Core Elements (新闻核心要素区) - 可选

**用途**: 展示新闻的关键数据、地点、人物等核心要素（最多3个）

**卡片设计**:
- **背景**: `#ffffff`（纯白）
- **边框**: `1px solid #dcd6ce`（细微边框）
- **圆角**: 8px
- **内边距**: 20px
- **外边距**: 顶部24px

**内容格式**（水平排列或垂直列表）:
```
┌─────────────────────────────┐
│ 📊 [要素标签] [极简说明]    │
│ 💰 [要素标签] [极简说明]    │
│ 📍 [要素标签] [极简说明]    │
└─────────────────────────────┘
```

- **图标**: Font Awesome 图标（`<i class="fa-solid fa-chart-line"></i>`）
- **标签**: `'Noto Sans SC'`, 700, 20px, `#c17c4a`
- **说明**: `'Noto Sans SC'`, 500, 18px, `#2c241b`
- **数量**: 不超过3个核心要素

**示例**:
```
📊 涨幅 +2.3%   💰 金额 1万亿   📍 地点 上海
```

#### 5. 页尾
- **分割线**: `border-t-2 border-[#dcd6ce]`
- **文字**:
  - 字体: `'Noto Sans SC'`, 500
  - 大小: 20px
  - 颜色: `#94A3B8`（浅灰）
  - 内容: `Shared by 文森特`（✅ 已确认）
  - 对齐: 右对齐
  - 布局: 与二维码在同一行
- **二维码**:
  - 尺寸: 150×150px（✅ 已确认）
  - 位置: 右下角，与文字同行
  - 样式: 带爱马仕橙点缀（✅ 已确认）
  - 链接: 当天的新闻页面（如 `2025-02-08.html`）

---

## 技术实现方案

### 一、技术选型

#### 前端生成方案（已确认）
```
用户点击"图片"按钮
  ↓
显示Toast: "正在生成图片..."
  ↓
创建隐藏的DOM容器（1080×1920px）
  ↓
按照"社论风+科技感"填充内容
  ↓
使用html2canvas渲染
  ↓
生成图片DataURL
  ↓
弹出全屏预览
  ↓
用户长按保存（手机原生功能）
```

#### 技术栈
- **html2canvas**: v2.0.0+（将DOM转换为canvas）
- **QR Code生成库**: qrcode.js 或类似库（生成二维码）
- **无需后端**: 纯前端实现

### 二、关键实现细节

#### html2canvas配置
```javascript
{
  scale: 2,              // 2倍清晰度（Retina屏幕适配）
  useCORS: true,         // 支持跨域图片
  backgroundColor: null, // 透明背景（使用渐变背景）
  logging: false,        // 关闭日志输出
  allowTaint: false,     // 安全模式
  imageTimeout: 10000,   // 图片加载超时10秒
  removeContainer: true  // 生成后删除临时容器
}
```

#### 字体预加载
```javascript
// 确保字体加载完成再生成
document.fonts.ready.then(() => {
  generateImage();
});

// 或者手动等待
Promise.all([
  document.fonts.load('900 64px "Noto Serif SC"'),
  document.fonts.load('700 18px "Oswald"'),
  document.fonts.load('500 28px "Noto Sans SC"')
]).then(() => {
  generateImage();
});
```

#### 二维码生成（带爱马仕橙点缀）
```javascript
// 使用 qrcode.js 生成基础二维码
QRCode.toCanvas(container, url, {
  width: 150,
  margin: 0,
  color: {
    dark: '#000000',
    light: '#ffffff'
  }
});

// 然后添加爱马仕橙点缀（CSS实现）
```

**CSS实现爱马仕橙点缀**:
```css
.qrcode-container {
  position: relative;
  display: inline-block;
  width: 150px;
  height: 150px;
}

.qrcode-container::before {
  content: '';
  position: absolute;
  top: -5px;
  left: -5px;
  right: -5px;
  bottom: -5px;
  border: 3px solid #c17c4a; /* 爱马仕橙边框 */
  border-radius: 8px;
  opacity: 0.3;
  z-index: -1;
}

/* 或者在四个角落添加橙色装饰点 */
.qrcode-container::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 20px;
  height: 20px;
  background: linear-gradient(135deg, #c17c4a 50%, transparent 50%);
  border-radius: 4px 0 0 0;
}
```

**备选方案：使用带颜色的二维码库**
```javascript
// 使用 qr-code-styling 库
import QRCodeStyling from 'qr-code-styling';

const qrCode = new QRCodeStyling({
  width: 150,
  height: 150,
  type: 'svg',
  data: url,
  image: '',
  dotsOptions: {
    color: '#000000',
    type: 'dots'
  },
  backgroundOptions: {
    color: '#ffffff',
  },
  cornersSquareOptions: {
    type: 'extra-rounded',
    color: '#c17c4a' // 爱马仕橙四角
  },
  cornersDotOptions: {
    type: 'dot',
    color: '#c17c4a' // 爱马仕橙定位点
  }
});
```

### 三、性能优化

#### 1. 图片质量
- **压缩质量**: 0.85（平衡清晰度和文件大小）
- **格式**: PNG（高质量）或 JPG（文件小约50%）

#### 2. 生成速度
- **预期时间**: 3-5秒
- **超时限制**: 10秒
- **超时处理**: 提示"生成超时，请稍后重试"

#### 3. 内存管理
- 生成后立即删除临时DOM容器
- Canvas转图片后释放Canvas对象
- 避免同时生成多张图片

### 四、兼容性处理

#### 浏览器支持
- ✅ Chrome 90+（推荐）
- ✅ Safari 14+（iOS/macOS）
- ✅ 微信内置浏览器（iOS/Android）
- ⚠️ 部分Android浏览器可能有兼容性问题

#### 已知问题及解决方案

**问题1**: Safari跨域图片失败
```javascript
// 解决方案：设置img.crossOrigin
img.crossOrigin = 'anonymous';
```

**问题2**: 文字渲染不一致
```javascript
// 解决方案：使用scale=2提高清晰度
```

**问题3**: 生成速度慢
```javascript
// 解决方案：简化DOM结构，减少阴影和渐变
```

---

## 用户交互流程

### 一、正常流程

```
1. 用户点击"图片"按钮
   ↓
2. 按钮变为loading状态
   - 图标变为加载动画
   - 文字变为"生成中..."
   - 按钮禁用，防止重复点击
   ↓
3. Toast显示
   - 内容: "正在生成图片，请稍候..."
   - 位置: 屏幕底部
   - 持续时间: 直到生成完成
   ↓
4. 后台处理（3-5秒）
   - 创建隐藏DOM容器
   - 填充新闻内容
   - 渲染为图片
   ↓
5. 弹出居中图片预览（✅ 已确认居中样式）
   - 图片居中显示（不是全屏）
   - 背景遮罩: 半透明黑色 `rgba(0,0,0,0.8)`
   - 顶部提示条: "长按图片保存到相册"
   - 底部关闭按钮: "关闭"
   ↓
6. 用户操作
   - 长按图片 → 调用手机原生保存/分享功能
   - 点击关闭按钮 → 关闭预览
   - 点击遮罩区域 → 关闭预览
   ↓
7. 关闭预览
   - 删除临时DOM容器
   - 按钮恢复原状
   - Toast消失
```

### 二、错误处理

#### 1. 生成失败
**Toast提示**: "图片生成失败，请尝试长按截图分享"
**降级方案**: 引导用户手动截图

#### 2. 超时
**Toast提示**: "生成超时，请稍后重试"
**可能原因**:
- 网络问题（字体加载慢）
- 内容过长（渲染时间久）
- 浏览器兼容性问题

#### 3. 不支持
**Toast提示**: "您的浏览器不支持图片生成，请截图分享"
**检测方法**:
```javascript
if (!window.html2canvas) {
  showToast('您的浏览器不支持图片生成');
}
```

#### 4. 内容过长
**处理方案**:
- 标题最多2行
- 摘要最多6行
- 超出部分显示"..."

### 三、用户反馈设计

#### 按钮状态变化
```javascript
// 初始状态
按钮: "图片" + 图标

// 点击后
按钮: "生成中..." + loading动画
禁用: true

// 成功后
按钮: 恢复初始状态
Toast: "图片已生成"

// 失败后
按钮: 恢复初始状态
Toast: "生成失败，请重试"
```

#### Toast样式
- **背景**: `rgba(30, 41, 59, 0.95)`（深色半透明）
- **文字**: `#f8fafc`（白色）
- **圆角**: 8px
- **阴影**: `0 8px 24px rgba(0, 0, 0, 0.3)`
- **位置**: 固定在屏幕底部
- **动画**: 淡入淡出

---

## 测试页面规格

### 一、文件位置

#### 目录结构
```
daily-news-bot/
├── share-test/              # 新建子文件夹（不上传GitHub）
│   └── test-share.html     # 测试页面
├── .gitignore              # 添加 /share-test/
```

#### .gitignore 配置
```gitignore
# 测试文件夹（不上传）
/share-test/
```

### 二、测试数据

#### 新闻1：短标题+短摘要
```json
{
  "title": "美联储维持利率不变",
  "title_original": "",
  "content": "美联储FOMC会议决定将基准利率维持在5.25%-5.5%区间，符合市场预期。点阵图显示年内仍有降息空间。",
  "source": "Bloomberg",
  "publish_time": "2025-02-09T10:00:00",
  "url": "https://example.com/news/1"
}
```

#### 新闻2：长标题+长摘要
```json
{
  "title": "中国央行宣布下调存款准备金率0.5个百分点释放长期资金约1万亿元人民币支持实体经济发展",
  "title_original": "",
  "content": "中国人民银行宣布决定下调金融机构存款准备金率0.5个百分点（不含已执行5%存款准备金率的金融机构）。本次下调后，大型金融机构存款准备金率为8.5%，中小金融机构为6.5%。此次降准释放长期资金约1万亿元，旨在保持银行体系流动性合理充裕，支持实体经济发展。",
  "source": "新华社",
  "publish_time": "2025-02-09T07:00:00",
  "url": "https://example.com/news/2"
}
```

#### 新闻3：英文新闻+翻译
```json
{
  "title": "日元跌至160关口",
  "title_original": "Japanese Yen weakens to 160 against US dollar",
  "content": "受美联储降息预期与日本央行政策分歧影响，日元汇率跌至160关口，创34年新低。市场预期日本央行可能干预汇市。",
  "source": "Reuters",
  "publish_time": "2025-02-09T11:00:00",
  "url": "https://example.com/news/3"
}
```

### 三、测试页面功能

#### 基本结构
```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>图片分享功能测试</title>
    <!-- 字体引入 -->
    <!-- 样式引入 -->
</head>
<body>
    <header>
        <h1>图片分享功能测试</h1>
        <p>共3条测试新闻，点击"图片"按钮测试生成效果</p>
    </header>

    <main>
        <!-- 新闻1 -->
        <article class="news-card">
            <h2>美联储维持利率不变</h2>
            <p>摘要内容...</p>
            <div class="news-footer">
                <button onclick="generateImage(1)">生成图片</button>
            </div>
        </article>

        <!-- 新闻2 -->
        <article class="news-card">
            <h2>中国央行宣布...</h2>
            <p>摘要内容...</p>
            <div class="news-footer">
                <button onclick="generateImage(2)">生成图片</button>
            </div>
        </article>

        <!-- 新闻3 -->
        <article class="news-card">
            <h2>日元跌至160关口</h2>
            <p>原标题：Japanese Yen weakens...</p>
            <p>摘要内容...</p>
            <div class="news-footer">
                <button onclick="generateImage(3)">生成图片</button>
            </div>
        </article>
    </main>

    <!-- 全屏预览容器 -->
    <div id="preview-container" style="display: none;">
        <div class="preview-header">长按图片保存到相册</div>
        <img id="preview-image" />
    </div>

    <!-- Toast容器 -->
    <div id="toast" class="toast"></div>

    <!-- 引入html2canvas -->
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@2.0.0/dist/html2canvas.min.js"></script>
    <!-- 引入qrcode -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
    <!-- 业务逻辑 -->
    <script src="test-share.js"></script>
</body>
</html>
```

---

## ✅ 需求确认总结

所有需求已确认完成，可以交付开发：

| 编号 | 问题 | 确认结果 |
|------|------|---------|
| **1** | **图片尺寸** | ✅ 宽度1080px固定，高度自适应 |
| **2** | **原标题显示** | ✅ 不显示 |
| **3** | **页尾域名** | ✅ "Shared by 文森特"（不显示域名） |
| **4** | **二维码样式** | ✅ 带爱马仕橙点缀（现代） |
| **5** | **二维码大小** | ✅ 150×150px |
| **6** | **弹窗样式** | ✅ 居中（有关闭按钮） |
| **7** | **背景装饰** | ✅ 无装饰（纯粹报纸质感） |
| **8** | **卡片边框** | ✅ 无边框，纯平面 |
| **9** | **品牌Logo** | ✅ 不显示 |
| **10** | **图片格式** | ✅ JPG/JPEG |

---

## 设计参考要素

### 一、"现代社论风"设计提示词

以下是你提供的设计要素，已整合到上面的规范中：

#### 角色
你是「现代社论风·单条新闻信息卡设计师」：接收单条中文新闻内容（含标题、导语、核心要素）→ 输出单张、单文件 HTML5 杂志风格新闻信息卡。追求信息聚焦、高对比、视觉冲击力，突出单条新闻核心价值。

#### 核心设计原则
- **风格定义**: Compact Editorial (紧凑社论)。像一张精美的报纸单条新闻摘要卡或杂志新闻侧边栏卡片，聚焦单条新闻核心信息。
- **布局逻辑**: 严格的网格系统，拒绝无效留白，围绕单条新闻核心要素（标题、导语、关键信息）进行高密度聚合，突出信息层级。
- **无科技装饰**: 去掉渐变背景、几何图形、科技线条，纯粹报纸质感

#### 色彩策略
- 背景: `#e5e0d8` / `#f7f5f0` (沉稳的报纸灰/米色)
- 主色: `#2c241b` (近乎黑的深褐，用于高对比文字)
- 强调: `#c17c4a` (爱马仕橙/暖棕，用于数据和图标)
- 装饰: `#dcd6ce` (分割线颜色)

#### 字体与排版
- **超大标题**: 'Noto Serif SC', font-weight: 900, line-height: 0.85
- **数据数字**: 'Oswald', font-weight: 700
- **正文**: 'Noto Sans SC'

#### 布局结构
- **容器**: 整个图片就是卡片，报纸米色背景 `#e5e0d8`，圆角 16px，内边距 60px

**Header (新闻报头)**:
- 左侧：单条新闻超大主标题 (4rem/64px)，紧贴顶部，突出新闻核心主题
- 右侧/底部：单条新闻辅助信息（来源/时间），采用小号全大写英文+中文组合
- 底部由一条粗黑线 (border-b-4 border-[#2c241b]) 贯穿，分割头部与正文区域

**News Lead (新闻导语区)**:
- 浅色背景块 (bg-[#ece8e1])，左侧带有强调色粗边框 (border-l-4)，内放单条新闻导语，简洁概括新闻核心内容

**News Core Elements (新闻核心要素区) - 可选**:
- 卡片式设计，白色背景，细微边框，聚焦单条新闻关键要素（如数据、地点、人物等），内容紧凑不冗余
- 图标 + 要素标签 + 极简说明，快速传递单条新闻核心信息点，提升阅读效率
- 核心要素不超过三个

**原标题（英文标题）**:
- 斜体显示，浅灰色

**页尾**:
- "Shared by @Financial Intelligence" + 二维码
- 右对齐，浅灰色

### 二、重要说明

❌ **已去掉的设计元素**:
- 渐变背景层
- 几何装饰图形
- 科技线条纹理
- 半透明光晕效果

✅ **保留的设计元素**:
- 纯粹的报纸米色背景
- 报纸排版风格
- 高对比度文字
- 紧凑的社论风布局

#### 2. 几何装饰
- 右上角半透明白色圆形光晕
- 左下角几何三角形装饰
- 科技网格纹理

#### 3. 现代字体
- 保留社论风的Noto Serif SC（标题）
- 增加Oswald（数字和英文）
- 保持Noto Sans SC（正文）

---

## 附录

### 一、现有模板位置

- **文件路径**: `/Users/vincent/Documents/daily-news-bot/news_bot/templates/daily_news.html`
- **已有功能**:
  - ✅ "图片"按钮（第1051行）
  - ✅ "转发"按钮（第1057行）
  - ✅ 主题切换（亮色/暗色）
  - ✅ 响应式设计

### 二、相关文件

```
daily-news-bot/
├── news_bot/
│   ├── templates/
│   │   └── daily_news.html         # 主模板（已有）
│   ├── src/
│   │   └── html_generator.py       # HTML生成逻辑
│   └── main.py                     # 主入口
├── share-test/                     # 新建（不上传）
│   ├── test-share.html            # 测试页面
│   └── test-share.js              # 测试逻辑
├── docs/
│   └── IMAGE_SHARE_FEATURE.md     # 本文档
└── .gitignore                     # 需要添加 /share-test/
```

### 三、开发步骤

#### 阶段1：需求确认（当前）
- ✅ 整理需求文档
- ⏳ 回答10个待确认问题
- ⏳ 确认设计细节

#### 阶段2：测试页面开发（Code X负责）
- ⏳ 创建 `/share-test/` 文件夹
- ⏳ 开发 `test-share.html`
- ⏳ 实现 `generateImage()` 函数
- ⏳ 集成 html2canvas 和 qrcode.js
- ⏳ 测试3条新闻数据

#### 阶段3：集成到主模板（Code X负责）
- ⏳ 在 `daily_news.html` 中引入图片生成功能
- ⏳ 修改"图片"按钮的 `onclick` 事件
- ⏳ 处理真实新闻数据
- ⏳ 优化性能和兼容性

#### 阶段4：测试和优化
- ⏳ 在不同浏览器测试
- ⏳ 在手机上测试（iOS/Android）
- ⏳ 在微信中测试
- ⏳ 优化生成速度和图片质量

---

## 文档版本历史

| 版本 | 日期 | 修改内容 | 修改人 |
|------|------|---------|--------|
| v1.0 | 2025-02-09 | 初始版本，整理完整需求 | Claude |
| v1.1 | 2025-02-09 | 移除AI锐评相关内容 | Claude |
| v2.0 | 2025-02-09 | 重新设计为纯粹社论风，去掉渐变背景 | Claude |
| v2.1 | 2025-02-09 | 确认所有需求，定稿开发版本 | Claude |

---

## 联系方式

- **项目负责人**: Vincent
- **需求规划**: Claude
- **代码开发**: Code X
- **项目位置**: `/Users/vincent/Documents/daily-news-bot`

---

**文档结束**

请回答[待确认问题](#待确认问题)部分的10个问题，确认后即可交付Code X进行开发。
