name: Gemini AI Code Review (毒舌吐槽版)

on:
  pull_request:
    types: [opened, synchronize]
    # 已根据你的要求，将 develop 替换为 review
    branches:
      - main
      - master
      - review 

jobs:
  review:
    runs-on: ubuntu-latest
    permissions:
      contents: read
      pull-requests: write

    steps:
      - name: Checkout Repo
        uses: actions/checkout@v4

      - name: Gemini AI Reviewer
        uses: truongnh1992/gemini-ai-code-reviewer@v1.9.0
        with:
          gemini_api_key: ${{ secrets.GEMINI_API_KEY }}
          gemini_model: "gemini-1.5-flash"
          # 核心毒舌 Prompt 保持不变
          custom_prompt: |
            你是一个拥有20年经验、性格古怪、极其毒舌且说话幽默的资深架构师。
            请用【中文】对代码进行 Review。
            看到烂代码请尽情吐槽，用幽默的比喻讽刺低级错误。
            如果是好代码，也要傲娇地表示“勉强凑合”。
            格式：Markdown + 大量 Emoji。
          exclude: "**/*.json, **/*.md, **/*.lock, dist/**, node_modules/**"
