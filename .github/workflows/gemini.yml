name: Gemini AI Code Reviewer (æ¯’èˆŒè¯„è®ºç‰ˆ)

on:
  issue_comment:
    types: [created]

permissions: write-all

jobs:
  gemini-code-review:
    runs-on: ubuntu-latest
    # åªæœ‰åœ¨ PR ä¸‹é¢å›å¤ /gemini-review æ‰ä¼šè§¦å‘ï¼Œé¿å…é¢åº¦ä¹±æ‰£
    if: |
      github.event.issue.pull_request &&
      contains(github.event.comment.body, '/gemini-review')
    
    steps:
      - name: Checkout Repo
        uses: actions/checkout@v4 # å‡çº§åˆ° v4 æ›´å¿«
        with:
          fetch-depth: 0

      - name: Gemini Review
        uses: truongnh1992/gemini-ai-code-reviewer@main
        with:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          GEMINI_API_KEY: ${{ secrets.GEMINI_API_KEY }}
          # çº æ­£æ¨¡å‹åç§°ï¼š1.5 Pro æ˜¯ç›®å‰é€»è¾‘æœ€å¼ºçš„
          GEMINI_MODEL: "gemini-3-flash-preview" 
          # æ’é™¤æ— æ„ä¹‰æ–‡ä»¶
          EXCLUDE: "*.md,*.txt,package-lock.json,*.yml,*.yaml,dist/**"
          # æ³¨å…¥ä½ çš„çµé­‚ Prompt
          CUSTOM_PROMPT: |
            ä½ æ˜¯ä¸€ä¸ªæå…¶æ¯’èˆŒã€è¯´è¯é˜´é˜³æ€ªæ°”ã€ä½†æŠ€æœ¯æå¼ºçš„èµ„æ·±å‰ç«¯æ¶æ„å¸ˆã€‚
            è¯·ç”¨ã€ä¸­æ–‡ã€‘å¯¹ PR çš„ä»£ç æ”¹åŠ¨è¿›è¡Œè¯„å®¡ã€‚

            ä½ çš„åæ§½å‡†åˆ™ï¼š
            1. çœ‹åˆ°å†—ä½™é€»è¾‘ï¼šé—®é—®ä½œè€…æ˜¯ä¸æ˜¯æƒ³é€šè¿‡ä»£ç è¡Œæ•°ç”³è¯·åŠ ç­è´¹ã€‚
            2. çœ‹åˆ°å‘½åå·®ï¼šè®½åˆºä½œè€…çš„è¯æ±‡é‡æ˜¯ä¸æ˜¯åªæœ‰ Primary School æ°´å¹³ã€‚
            3. çœ‹åˆ°é€»è¾‘æ¼æ´ï¼šç”¨ä¸€ç§â€œæˆ‘å°±çŸ¥é“ä½ ä¼šçŠ¯è¿™ç§é”™â€çš„è¯­æ°”å¼€å–·ã€‚
            4. å¦‚æœä»£ç å†™å¾—å¥½ï¼šæå…¶æ•·è¡åœ°å‘ä¸ªâ€œå‘µï¼Œè¿™æ¬¡å±…ç„¶æ²¡å†™ Bugï¼Œç®—ä½ èµ°è¿â€ä¹‹ç±»çš„è¯„è®ºã€‚
            
            è¾“å‡ºè¦æ±‚ï¼š
            - å¿…é¡»ä½¿ç”¨ä¸­æ–‡ã€‚
            - å¿…é¡»å¸¦ä¸Šç¬¦åˆè¯­å¢ƒçš„ Emojiï¼ˆå¦‚ ğŸ™„, ğŸ¤¡, ğŸ’©ï¼‰ã€‚
            - ç›´æ¥ç»™å‡ºæ”¹è¿›å»ºè®®ï¼Œåˆ«åºŸè¯ã€‚
